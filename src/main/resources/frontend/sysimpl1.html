<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<h1>生成包文件说明表</h1>
<h5>请上传项目包。</h5>
<input type="file" id="zipFile" accept=".zip" onchange="handleFile()">

<textarea>
com/ssm 基础代码
com/ssm/
</textarea>
<div id="result"></div>

<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.js"></script>
<script src="zip.js"></script>
<script>
    async function handleFile() {
        const fileInput = document.getElementById('zipFile');
        const file = fileInput.files[0];

        let zipReader = new zip.ZipReader(new zip.BlobReader(file)/*, function(reader) {
            reader.getEntries(function(entries) {
                entries.forEach(function(entry) {
                    if (!entry.directory) {
                        entry.getData(new zip.TextWriter(), function(text) {
                            const firstLine = text.split('\n')[0];
                            console.log("File path: ", entry.filename);
                            console.log("First line: ", firstLine);
                        });
                    }
                });
            });
        }*/);
        let entries = await zipReader.getEntries()
        for (let entry of entries) {
            if (!entry.directory) {
                document.getElementById("result").innerText += entry.filename
            }else{
                document.getElementById("result").innerText += entry.filename
            }
        }
    }
</script>

</body>
</html>
